(this.webpackJsonpredux_autocomplete_search=this.webpackJsonpredux_autocomplete_search||[]).push([[0],{67:function(t,e,n){},70:function(t,e,n){},71:function(t,e,n){},72:function(t,e,n){},73:function(t,e,n){},74:function(t,e,n){},77:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),o=n(16),s=n.n(o),i=n(11),a=n(12),u=n(4),l="SET_INPUT_VALUE",h=function(t){return{type:l,value:t}},d={value:""},j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:return Object(u.a)(Object(u.a)({},t),{},{value:e.value});default:return t}},O="HINTS_LOADING",b="FETCH_HINTS_SUCCESS",p="FETCH_HINTS_ERROR",f="SET_ACTIVE_HINT",v="SET_NO_RESULTS",m=function(t){return{type:b,hints:t}},g=function(t){return{type:f,payload:t}},x=function(t){return{type:v,value:t}},N={hints:[],isLoading:!1,isError:!1,activeHintNumber:-1,noResults:!1},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case O:return Object(u.a)(Object(u.a)({},t),{},{isError:!1,isLoading:!0});case b:return Object(u.a)(Object(u.a)({},t),{},{hints:e.hints,isError:!1,isLoading:!1});case p:return Object(u.a)(Object(u.a)({},t),{},{isError:!0,isLoading:!1});case f:return Object(u.a)(Object(u.a)({},t),{},{activeHintNumber:e.payload});case v:return Object(u.a)(Object(u.a)({},t),{},{noResults:e.value});default:return t}},y="PHOTOS_LOADING",_="FETCH_PHOTOS_SUCCESS",S="FETCH_PHOTOS_ERROR",H="FETCH_MODAL_PHOTO_SUCCESS",C=function(){return{type:y}},R=function(){return{type:S}},T={photos:[],modalPhoto:{},isLoading:!1,isError:!1},L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case y:return Object(u.a)(Object(u.a)({},t),{},{isError:!1,isLoading:!0});case _:return Object(u.a)(Object(u.a)({},t),{},{photos:e.photos,isError:!1,isLoading:!1});case S:return Object(u.a)(Object(u.a)({},t),{},{isError:!0,isLoading:!1});case H:return Object(u.a)(Object(u.a)({},t),{},{modalPhoto:e.photo,isError:!1,isLoading:!1});default:return t}},w=Object(a.c)({input:j,hints:E,photos:L}),I=n(34);var P=n(18),k=n(5),D=n(35),A=Object(D.a)({accessKey:"cUNWt6ZRvDjbpw68i1QweG95RNWvHN0ahD6JYIQIhMY"}),U={page:1,perPage:30},q=function(t){return function(e){e(C()),A.search.getPhotos(Object(u.a)({query:t},U)).then((function(t){var n,r=t.response;e((n=r.results,{type:_,photos:n}))})).catch((function(){e(R())}))}},M=function(t){return function(e){e(C()),A.photos.get({photoId:t}).then((function(t){var n=t.response;e({type:H,photo:n})})).catch((function(){e(R())}))}},V=n(37),F=n.n(V),G=function(t){return function(e){e({type:O}),F.a.get("".concat("https://secret-ocean-49799.herokuapp.com/https://unsplash.com/nautocomplete/").concat(t)).then((function(t){var n=t.data.autocomplete;e(m(n)),e(x(!1)),n.length||e(x(!0))})).catch((function(){e({type:p})}))}},X=(n(67),n(1)),Y=Object(i.b)((function(t){return{value:t.input.value,hints:t.hints.hints,activeHint:t.hints.activeHintNumber}}),(function(t){return{fetchPhotos:function(e){return t(q(e))},actionSetActiveHint:function(e){return t(g(e))},setInputValue:function(e){return t(h(e))},fetchHints:function(e){return t(G(e))},clearHints:function(){t(m([])),t(g(-1))},setNoResults:function(e){return t(x(e))}}}))((function(t){var e=t.value,n=t.setInputValue,c=t.fetchHints,o=t.hints,s=t.activeHint,i=t.actionSetActiveHint,a=t.fetchPhotos,u=t.clearHints,l=t.setNoResults,h=Object(r.useCallback)((function(t){t.preventDefault(),n(t.target.value),t.target.value.length>2?c(t.target.value):(l(!1),u())}),[]),d=Object(k.e)();return Object(X.jsx)("input",{id:"myInput",type:"text",value:e,onChange:h,onKeyDown:function(t){return 40===t.keyCode&&s<o.length-1?i(s+1):38===t.keyCode&&s>0?i(s-1):void(13===t.keyCode&&(t.preventDefault(),s>=0&&o[s]?(a(o[s].query),n(o[s].query),u(),d.push("/searchResults")):(a(t.target.value),d.push("/searchResults"),n(t.target.value),u())))},placeholder:"Start searching images"})}));n(70);var J=function(){return Object(X.jsx)("div",{className:"loader",children:Object(X.jsxs)("div",{className:"spinner",children:[Object(X.jsx)("div",{className:"rect1"}),Object(X.jsx)("div",{className:"rect2"}),Object(X.jsx)("div",{className:"rect3"}),Object(X.jsx)("div",{className:"rect4"}),Object(X.jsx)("div",{className:"rect5"})]})})};n(71);var Q=Object(i.b)((function(t){return{hints:t.hints.hints,activeHint:t.hints.activeHintNumber,isLoading:t.hints.isLoading,isError:t.hints.isError,inputValue:t.input.value,photos:t.photos.photos,noResults:t.hints.noResults}}),(function(t){return{actionSetActiveHint:function(){return t(g())},fetchPhotos:function(e){return t(q(e))},setInputValue:function(e){return t(h(e))},clearHints:function(){return t(m([]))}}}))((function(t){var e=t.hints,n=t.activeHint,r=t.fetchPhotos,c=t.isLoading,o=t.setInputValue,s=t.clearHints,i=t.noResults,a=t.formClass,u=t.isError,l=Object(k.e)(),h=function(t){r(t.target.getAttribute("query")),l.push("/searchResults"),o(t.target.getAttribute("query")),s()};return Object(X.jsxs)("div",{className:a,children:[Object(X.jsx)(Y,{}),c?Object(X.jsx)(J,{}):null,Object(X.jsxs)("div",{className:"hints-container",children:[u?Object(X.jsx)("div",{className:"autocomplete-items",children:"Error, couldn't load hints"}):null,i?Object(X.jsx)("div",{className:"autocomplete-items",id:"no-hints",children:"no hints"}):e.map((function(t,r){return Object(X.jsx)("div",{query:t.query,onClick:h,className:e[n]&&t.query===e[n].query?"autocomplete-active":"autocomplete-items",children:t.query},r)}))]})]})})),W=n(41);n(72),n(73);var K=function(t){var e=t.photo;return Object(X.jsx)("li",{className:"photo-card",children:Object(X.jsx)("img",{className:"photo",src:e.urls.regular,alt:e.description||""})})},z=(n(74),n(39)),B=n(40),Z=function(t){var e=t.closeModal;Object(r.useEffect)((function(){var t=function(t){27===t.keyCode&&e()};return window.addEventListener("keydown",t),function(){return window.removeEventListener("keydown",t)}}),[]);return Object(X.jsx)("div",{className:"overlay",children:Object(X.jsxs)("div",{className:"content",children:[Object(X.jsx)(z.a,{className:"close-icon",fixedWidth:!0,icon:B.a,size:"sm",onClick:e}),Object(X.jsxs)("div",{className:"modalHeader",children:[t.headerContent," "]}),Object(X.jsxs)("div",{className:"modalContent",children:[" ",t.children]}),Object(X.jsx)("div",{className:"modalFooter",children:t.footerContent})]})})};var $,tt=Object(i.b)((function(t){return{photos:t.photos.photos,isLoading:t.photos.isLoading,isError:t.photos.isError,modalPhoto:t.photos.modalPhoto}}),(function(t){return{fetchModalPhoto:function(e){return t(M(e))}}}))((function(t){var e=t.photos,n=t.isLoading,c=t.isError,o=t.fetchModalPhoto,s=t.modalPhoto,i=Object(r.useState)(!1),a=Object(W.a)(i,2),u=a[0],l=a[1];return Object(X.jsxs)("ul",{className:"photos-container",children:[c?u&&Object(X.jsx)(Z,{closeModal:function(){return l(!1)},children:"Something went wrong!!! Try again later"}):null,n?Object(X.jsx)(J,{}):null,u&&!n&&!c&&Object(X.jsx)(Z,{closeModal:function(){return l(!1)},headerContent:Object(X.jsx)("a",{href:s.user.links.html,rel:"noopener noreferrer",target:"_blank",children:s.user.name}),footerContent:s.location.title,children:Object(X.jsx)("img",{className:"modalPhoto",src:s.urls.regular,alt:s.description||""})}),!e.length&&Object(X.jsx)("div",{className:"no-results",children:"SORRY, NO RESULTS MATCHING QUERY"}),Object(X.jsx)("div",{className:"search-results",children:e.map((function(t,e){return Object(X.jsx)("div",{style:{cursor:"pointer"},onClick:function(){return function(t){l(!0),o(t.id)}(t)},children:Object(X.jsx)(K,{photo:t})},e)}))})]})})),et=Object(a.e)(w,$,Object(a.d)(Object(a.a)(I.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));s.a.render(Object(X.jsx)(c.a.StrictMode,{children:Object(X.jsx)(i.a,{store:et,children:Object(X.jsxs)(P.a,{basename:"/redux-unsplash-live-search",children:[Object(X.jsx)(k.a,{exact:!0,path:"/",children:Object(X.jsx)(Q,{formClass:"home-form"})}),Object(X.jsxs)(k.a,{path:"/searchResults",children:[Object(X.jsx)(Q,{formClass:"header-form"}),Object(X.jsx)(tt,{})]})]})})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.a3d39487.chunk.js.map