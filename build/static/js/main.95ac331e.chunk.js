(this.webpackJsonpredux_autocomplete_search=this.webpackJsonpredux_autocomplete_search||[]).push([[0],{67:function(t,e,n){},70:function(t,e,n){},71:function(t,e,n){},72:function(t,e,n){},73:function(t,e,n){},74:function(t,e,n){},77:function(t,e,n){},78:function(t,e,n){},79:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),s=n(16),o=n.n(s),i=n(11),a=n(12),u=n(4),l="SET_INPUT_VALUE",h=function(t){return{type:l,value:t}},d={value:""},j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:return Object(u.a)(Object(u.a)({},t),{},{value:e.value});default:return t}},O="HINTS_LOADING",b="FETCH_HINTS_SUCCESS",f="FETCH_HINTS_ERROR",p="SET_ACTIVE_HINT",v="SET_NO_RESULTS",m=function(t){return{type:b,hints:t}},g=function(t){return{type:p,payload:t}},x=function(t){return{type:v,value:t}},N={hints:[],isLoading:!1,isError:!1,activeHintNumber:-1,noResults:!1},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case O:return Object(u.a)(Object(u.a)({},t),{},{isError:!1,isLoading:!0});case b:return Object(u.a)(Object(u.a)({},t),{},{hints:e.hints,isError:!1,isLoading:!1});case f:return Object(u.a)(Object(u.a)({},t),{},{isError:!0,isLoading:!1});case p:return Object(u.a)(Object(u.a)({},t),{},{activeHintNumber:e.payload});case v:return Object(u.a)(Object(u.a)({},t),{},{noResults:e.value});default:return t}},y="PHOTOS_LOADING",S="FETCH_PHOTOS_SUCCESS",_="FETCH_PHOTOS_ERROR",H="FETCH_MODAL_PHOTO_SUCCESS",C=function(){return{type:y}},R=function(){return{type:_}},T={photos:[],modalPhoto:{},isLoading:!1,isError:!1},L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case y:return Object(u.a)(Object(u.a)({},t),{},{isError:!1,isLoading:!0});case S:return Object(u.a)(Object(u.a)({},t),{},{photos:e.photos,isError:!1,isLoading:!1});case _:return Object(u.a)(Object(u.a)({},t),{},{isError:!0,isLoading:!1});case H:return Object(u.a)(Object(u.a)({},t),{},{modalPhoto:e.photo,isError:!1,isLoading:!1});default:return t}},I=Object(a.c)({input:j,hints:E,photos:L}),P=n(34);var w=n(18),k=n(5),D=n(35),U=Object(D.a)({accessKey:"cUNWt6ZRvDjbpw68i1QweG95RNWvHN0ahD6JYIQIhMY"}),A={page:1,perPage:30},q=function(t){return function(e){e(C()),U.search.getPhotos(Object(u.a)({query:t},A)).then((function(t){var n,r=t.response;e((n=r.results,{type:S,photos:n}))})).catch((function(){e(R())}))}},M=function(t){return function(e){e(C()),U.photos.get({photoId:t}).then((function(t){var n=t.response;e({type:H,photo:n})})).catch((function(){e(R())}))}},V=n(37),F=n.n(V),Y=function(t){return function(e){e({type:O}),F.a.get("".concat("https://secret-ocean-49799.herokuapp.com/https://unsplash.com/nautocomplete/").concat(t)).then((function(t){var n=t.data.autocomplete;e(m(n)),e(x(!1)),n.length||e(x(!0))})).catch((function(){e({type:f})}))}},G=(n(67),n(1)),X=Object(i.b)((function(t){return{value:t.input.value,hints:t.hints.hints,activeHint:t.hints.activeHintNumber}}),(function(t){return{fetchPhotos:function(e){return t(q(e))},actionSetActiveHint:function(e){return t(g(e))},setInputValue:function(e){return t(h(e))},fetchHints:function(e){return t(Y(e))},clearHints:function(){t(m([])),t(g(-1))},setNoResults:function(e){return t(x(e))}}}))((function(t){var e=t.value,n=t.setInputValue,c=t.fetchHints,s=t.hints,o=t.activeHint,i=t.actionSetActiveHint,a=t.fetchPhotos,u=t.clearHints,l=t.setNoResults,h=Object(r.useCallback)((function(t){t.preventDefault(),n(t.target.value),t.target.value.length>2?c(t.target.value):(l(!1),u())}),[]),d=Object(k.e)();return Object(G.jsx)("input",{id:"myInput",type:"text",value:e,onChange:h,onKeyDown:function(t){return 40===t.keyCode&&o<s.length-1?i(o+1):38===t.keyCode&&o>0?i(o-1):void(13===t.keyCode&&(t.preventDefault(),o>=0&&s[o]?(a(s[o].query),n(s[o].query),u(),d.push("/searchResults")):(a(t.target.value),d.push("/searchResults"),n(t.target.value),u())))},placeholder:"Start searching images"})}));n(70);var J=function(){return Object(G.jsx)("div",{className:"loader",children:Object(G.jsxs)("div",{className:"spinner",children:[Object(G.jsx)("div",{className:"rect1"}),Object(G.jsx)("div",{className:"rect2"}),Object(G.jsx)("div",{className:"rect3"}),Object(G.jsx)("div",{className:"rect4"}),Object(G.jsx)("div",{className:"rect5"})]})})};n(71);var Q=Object(i.b)((function(t){return{hints:t.hints.hints,activeHint:t.hints.activeHintNumber,isLoading:t.hints.isLoading,isError:t.hints.isError,inputValue:t.input.value,photos:t.photos.photos,noResults:t.hints.noResults}}),(function(t){return{actionSetActiveHint:function(){return t(g())},fetchPhotos:function(e){return t(q(e))},setInputValue:function(e){return t(h(e))},clearHints:function(){return t(m([]))}}}))((function(t){var e=t.hints,n=t.activeHint,r=t.fetchPhotos,c=t.isLoading,s=t.setInputValue,o=t.clearHints,i=t.noResults,a=t.formClass,u=t.isError,l=Object(k.e)(),h=function(t){r(t.target.getAttribute("query")),l.push("/searchResults"),s(t.target.getAttribute("query")),o()};return Object(G.jsxs)("div",{className:a,children:[Object(G.jsx)(X,{}),c?Object(G.jsx)(J,{}):null,Object(G.jsxs)("div",{className:"hints-container",children:[u?Object(G.jsx)("div",{className:"autocomplete-items",children:"Error, couldn't load hints"}):null,i?Object(G.jsx)("div",{className:"autocomplete-items",id:"no-hints",children:"no hints"}):e.map((function(t,r){return Object(G.jsx)("div",{query:t.query,onClick:h,className:e[n]&&t.query===e[n].query?"autocomplete-active":"autocomplete-items",children:t.query},r)}))]})]})})),W=n(41);n(72),n(73);var K=function(t){var e=t.photo;return Object(G.jsx)("li",{className:"photo-card",children:Object(G.jsx)("img",{className:"photo",src:e.urls.regular,alt:e.description||""})})},z=(n(74),n(39)),B=n(40),Z=function(t){var e=t.closeModal;Object(r.useEffect)((function(){var t=function(t){27===t.keyCode&&e()};return window.addEventListener("keydown",t),function(){return window.removeEventListener("keydown",t)}}),[]);return Object(G.jsx)("div",{className:"overlay",children:Object(G.jsxs)("div",{className:"content",children:[Object(G.jsx)(z.a,{className:"close-icon",fixedWidth:!0,icon:B.a,size:"sm",onClick:e}),Object(G.jsxs)("div",{className:"modalHeader",children:[t.headerContent," "]}),Object(G.jsxs)("div",{className:"modalContent",children:[" ",t.children]}),Object(G.jsx)("div",{className:"modalFooter",children:t.footerContent})]})})};var $=Object(i.b)((function(t){return{photos:t.photos.photos,isLoading:t.photos.isLoading,isError:t.photos.isError,modalPhoto:t.photos.modalPhoto}}),(function(t){return{fetchModalPhoto:function(e){return t(M(e))}}}))((function(t){var e=t.photos,n=t.isLoading,c=t.isError,s=t.fetchModalPhoto,o=t.modalPhoto,i=Object(r.useState)(!1),a=Object(W.a)(i,2),u=a[0],l=a[1];return Object(G.jsxs)("ul",{className:"photos-container",children:[c?Object(G.jsx)(Z,{closeModal:function(){return l(!1)},children:"Something went wrong!!! Try again later"}):null,n?Object(G.jsx)(J,{}):null,u&&!n&&!c&&Object(G.jsx)(Z,{closeModal:function(){return l(!1)},headerContent:Object(G.jsx)("a",{href:o.user.links.html,rel:"noopener noreferrer",target:"_blank",children:o.user.name}),footerContent:o.location.title,children:Object(G.jsx)("img",{className:"modalPhoto",src:o.urls.regular,alt:o.description||""})}),!e.length&&!c&&Object(G.jsx)("div",{className:"no-results",children:"SORRY, NO RESULTS MATCHING QUERY"}),Object(G.jsx)("div",{className:"search-results",children:e.map((function(t,e){return Object(G.jsx)("div",{style:{cursor:"pointer"},onClick:function(){return function(t){l(!0),s(t.id)}(t)},children:Object(G.jsx)(K,{photo:t})},e)}))})]})}));n(77);var tt,et=function(){return Object(G.jsxs)("div",{className:"header",children:[Object(G.jsx)("h1",{children:"FIND YOUR UNSPLASH PHOTO"}),Object(G.jsx)(Q,{formClass:"home-form"})]})},nt=(n(78),Object(a.e)(I,tt,Object(a.d)(Object(a.a)(P.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())));o.a.render(Object(G.jsx)(c.a.StrictMode,{children:Object(G.jsx)(i.a,{store:nt,children:Object(G.jsxs)(w.a,{basename:"/redux-unsplash-live-search",children:[Object(G.jsx)(k.a,{exact:!0,path:"/",children:Object(G.jsx)(et,{})}),Object(G.jsxs)(k.a,{path:"/searchResults",children:[Object(G.jsx)(Q,{formClass:"header-form"}),Object(G.jsx)($,{})]})]})})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.95ac331e.chunk.js.map